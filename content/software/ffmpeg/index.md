---
title: FFmpeg
publishDate: 2023-09-11T17:33:00Z
lastmod: 2025-10-16T15:29:00Z
#categories: [multimedia]
contributors: [kttrickster]
---

## Применение

Часто появляется необходимость конвертировать или редактировать видео или аудио.
Для этих целей существует множество инструментов: бесплатные, платные, с
рекламой, онлайн, требующие установки. В большинстве случаев все они основаны на
**FFmpeg** — свободном инструменте с открытым исходным кодом для обработки
мультимедиа. Однако необходимо уметь пользоваться [консольным интерфейсом] и
знать определённые параметры. Не каждый пользователь сможет моментально осилить
этот интерфейс. Но освоения даже самых простых шаблонов команд будет достаточно
для быстрой и эффективной обработки мультимедиа, не полагаясь на сторонние
инструменты.

[консольным интерфейсом]: /guides/how-to-use-console

## Установка

Разработчики FFmpeg предоставляют только исходный код. Сборки для разных
операционных систем поставляются сторонними лицами.

### Windows

Самый простой способ установки через Winget: откройте терминал и введите
`winget install Gyan.FFmpeg`. Затем будет доступна команда `ffmpeg` (может
потребоваться перезайти в сеанс пользователя). Чтобы обновить, введите
`winget update --id Gyan.FFmpeg`.

Альтернативно можно установить вручную: [скачайте исполняемые файлы],
распакуйте и добавьте папку в переменную [Path].

[скачайте исполняемые файлы]: https://www.gyan.dev/ffmpeg/builds/ffmpeg-git-essentials.7z
[Path]: /guides/how-to-use-console#path

### Linux

Пакет `ffmpeg` должен быть доступен в репозиториях вашего дистрибутива:

- Debian и все производные (Ubuntu, Mint): `sudo apt install ffmpeg`
- Fedora: `sudo dnf install ffmpeg`
- Arch и все производные (EndeavourOS, Manjaro): `sudo pacman -S ffmpeg`

### macOS

Самый простой способ установки через [Homebrew]: `brew install ffmpeg`.

[Homebrew]: https://brew.sh

Альтернативно можно установить [вручную](https://evermeet.cx/ffmpeg).

### Android

Вы можете использовать FFmpeg на вашем Android через [Termux]: установите пакет
командой `pkg install ffmpeg`.

[Termux]: https://termux.dev

### Браузер

[ffmpeg.wasm] — это неофициальный порт FFmpeg на WebAssembly. На его основе
построены некоторые веб-приложения, которые конвертируют аудио и видео локально
на вашем устройстве. Для этого не нужно ничего устанавливать.

[ffmpeg.wasm]: https://ffmpegwasm.netlify.app

## Использование

FFmpeg имеет [консольный интерфейс]. Для проведения операций над файлами нужно
вводить определённые параметры. Это может быть сложно в первые разы, но как
только привыкнете, то сможете быстро выполнять нужные операции.

[консольный интерфейс]: /guides/how-to-use-console

Для вашего удобства на этой странице собраны шаблоны команд, которые вы можете
использовать для проведения конкретных операций над файлом. Скопируйте команду,
и подставьте свои значения. Шаблоны можно комбинировать, если знаете как это
правильно делать.

Если хотите узнать больше, то читайте
[документацию](https://ffmpeg.org/ffmpeg.html).

Также вы можете пробовать генерировать простые команды языковыми моделями. Они
не всегда выдают точный результат, всегда проверяйте вывод перед использованием.

### Конвертировать в другой формат

```sh
ffmpeg -i ввод.mp4 вывод.avi
```

Таким образом из видео можно сделать аудио (и наоборот).

### Обрезать по времени

```sh
ffmpeg -ss [начало] -i ввод.mp4 -t [длительность] -c copy вывод.mp4
```

- `-ss [начало]` — Отметка начала обрезанного файла.
- `-t [длительность]` — Длительность обрезанного фрагмента.

Время задаётся в форматах: `00:01:23.000` или `12` (секунд).
Можно отбросить параметр начала или длительности, чтобы обрезать файл только с
конца или начала соответственно.

### Изменить разрешение видео

```sh
ffmpeg -i ввод.mp4 -vf scale=[разрешение] вывод.mp4
```

[Разрешение] видео задаётся в форматах: `3840:2160`, `1920:1080`, `1280:720`.
Для автоматического определения размера стороны: `-1:720`, `640:-1`.

[Разрешение]: https://en.wikipedia.org/wiki/List_of_common_display_resolutions

### Ограничить кадры в секунду

```sh
ffmpeg -i ввод.mp4 -r 15 вывод.mp4
```

`-r 15` ограничит видео до 15 кадров в секунду.

### Уменьшить качество видео

```sh
ffmpeg -i ввод.mp4 -crf 35 вывод.mp4
```

Значения выше `23` помогут сократить размер файла.

### Отразить видео

```sh
ffmpeg -i ввод.mp4 -vf hflip -c:a copy вывод.mp4
```

- `hflip`: отразить по горизонтали
- `vflip`: отразить по вертикали

### Повернуть видео

```sh
ffmpeg -i ввод.mp4 -vf "transpose=[значение]" вывод.mp4
```

Значения `transpose`:
- `0`: повернуть на 90 градусов против часовой стрелки и отразить по вертикали.
- `1`: повернуть на 90 градусов по часовой стрелке.
- `2`: повернуть на 90 градусов против часовой стрелки.
- `3`: повернуть на 90 градусов по часовой стрелке и отразить по вертикали.

Можно дублировать параметр для поворота на 180 градусов:
`-vf "transpose=2,transpose=2"`.

### Стерео в моно

```sh
ffmpeg -i ввод.mp3 -ac 1 вывод.mp3
```

### Вставить аудио

```sh
ffmpeg -i ввод.mp4 -i аудио.mp3 -c copy -map 0:v:0 -map 1:a:0 вывод.mp4
```

### Изменить громкость

```sh
ffmpeg -i ввод.mp3 -filter:a "volume=0.5" вывод.mp3
```

Значение громкости можно указывать в процентах (`0.5` — в два раза тише,
`2.0` — в два раза громче) или в децибелах (`-5dB` — уменьшить на 5 децибел).

### Убрать аудио

```sh
ffmpeg -i ввод.mp4 -c copy -an вывод.mp4
```

Это удаляет аудиопоток в видео. Некоторые платформы (например, Telegram) будут
воспринимать файл как Gif.

### Видео в Gif

[Источник](https://t.me/endermanch/357)

```sh
ffmpeg -i ввод.mp4 -vf "fps=15,scale=512:-1:flags=lanczos,split[s0][s1];[s0]palettegen[p];[s1][p]paletteuse" вывод.gif && gifsicle -O3 --lossy=80 вывод.gif -o вывод.gif
```

Некоторые платформы (например, Telegram) хранят Gif как видео. Если вы хотите
получить Gif, то придётся заново конвертировать этот файл. Простая конвертация в
Gif не даст качественного результата, поэтому нужно дополнительно
воспользоваться инструментом [Gifsicle].

[Gifsicle]: https://www.lcdf.org/gifsicle
